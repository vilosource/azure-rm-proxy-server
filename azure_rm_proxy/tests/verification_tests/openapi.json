{"openapi":"3.1.0","info":{"title":"Azure RM Proxy Server","version":"0.1.0"},"paths":{"/api/subscriptions/":{"get":{"tags":["Subscriptions"],"summary":"List Subscriptions","operationId":"list_subscriptions_api_subscriptions__get","parameters":[{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionModel"},"title":"Response List Subscriptions Api Subscriptions  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resource-groups/":{"get":{"tags":["Resource Groups"],"summary":"List Resource Groups","operationId":"list_resource_groups_api_subscriptions__subscription_id__resource_groups__get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Subscription Id"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResourceGroupModel"},"title":"Response List Resource Groups Api Subscriptions  Subscription Id  Resource Groups  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resource-groups/{resource_group_name}/virtual-machines/":{"get":{"tags":["Virtual Machines"],"summary":"List Virtual Machines","operationId":"list_virtual_machines_api_subscriptions__subscription_id__resource_groups__resource_group_name__virtual_machines__get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Subscription Id"}},{"name":"resource_group_name","in":"path","required":true,"schema":{"type":"string","title":"Resource Group Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VirtualMachineModel"},"title":"Response List Virtual Machines Api Subscriptions  Subscription Id  Resource Groups  Resource Group Name  Virtual Machines  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resource-groups/{resource_group_name}/virtual-machines/{vm_name}":{"get":{"tags":["Virtual Machines"],"summary":"Get Virtual Machine Details","operationId":"get_virtual_machine_details_api_subscriptions__subscription_id__resource_groups__resource_group_name__virtual_machines__vm_name__get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Subscription Id"}},{"name":"resource_group_name","in":"path","required":true,"schema":{"type":"string","title":"Resource Group Name"}},{"name":"vm_name","in":"path","required":true,"schema":{"type":"string","title":"Vm Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VirtualMachineDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/virtual_machines/":{"get":{"tags":["VM Shortcuts"],"summary":"List All Virtual Machines","description":"Get all virtual machines across all subscriptions and resource groups.\nThis is a convenience endpoint that avoids navigating through subscriptions and resource groups.","operationId":"list_all_virtual_machines_api_subscriptions_virtual_machines__get","parameters":[{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VirtualMachineWithContext"},"title":"Response List All Virtual Machines Api Subscriptions Virtual Machines  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/virtual_machines/{vm_name}":{"get":{"tags":["VM Shortcuts"],"summary":"Get Vm By Name","description":"Find a virtual machine by name across all subscriptions and resource groups.\nThis is a convenience endpoint that avoids needing to know the subscription and resource group.\n\nParameters:\n    vm_name: Name of the VM to find\n    refresh_cache: Whether to bypass cache and fetch fresh data\n    debug: Enable extra debug logging for troubleshooting","operationId":"get_vm_by_name_api_subscriptions_virtual_machines__vm_name__get","parameters":[{"name":"vm_name","in":"path","required":true,"schema":{"type":"string","title":"Vm Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}},{"name":"debug","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Debug"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VirtualMachineDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/hostnames/":{"get":{"tags":["VM Hostnames"],"summary":"List Vm Hostnames","description":"Get a list of VM names and their hostnames from tags.\nThis endpoint is equivalent to the Azure CLI command:\naz vm list --subscription <your-subscription-id> --query \"[].{VMName:name, Hostname:tags.hostname}\" --output tsv\n\nParameters:\n    subscription_id: Optional subscription ID to filter by. If None, gets VMs from all subscriptions.\n    refresh_cache: Whether to bypass cache and fetch fresh data","operationId":"list_vm_hostnames_api_subscriptions_hostnames__get","parameters":[{"name":"subscription-id","in":"query","required":false,"schema":{"type":"string","title":"Subscription-Id"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VirtualMachineHostname"},"title":"Response List Vm Hostnames Api Subscriptions Hostnames  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports/virtual-machines":{"get":{"tags":["VM Report"],"summary":"Get Vm Report","description":"Generate a comprehensive report of all virtual machines across all subscriptions.\n\nThe report includes detailed information about each VM:\n- Hostname (if available)\n- Operating System\n- Environment (from tags)\n- Purpose (from tags)\n- Private IP Addresses\n- Public IP Addresses\n- VM Name\n- VM Size\n- OS Disk Size (GB)\n- Resource Group\n- Location\n- Subscription Information\n\nParameters:\n    refresh_cache: When set to true, bypasses cache and retrieves fresh data from Azure","operationId":"get_vm_report_api_reports_virtual_machines_get","parameters":[{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VirtualMachineReport"},"title":"Response Get Vm Report Api Reports Virtual Machines Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/routetables":{"get":{"tags":["Route Table"],"summary":"List Route Tables","description":"Get all route tables for a subscription.","operationId":"list_route_tables_api_subscriptions__subscription_id__routetables_get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Azure Subscription ID"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RouteTableSummaryModel"},"title":"Response List Route Tables Api Subscriptions  Subscription Id  Routetables Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resourcegroups/{resource_group_name}/routetables/{route_table_name}":{"get":{"tags":["Route Table"],"summary":"Get Route Table Details","description":"Get detailed information about a specific route table.","operationId":"get_route_table_details_api_subscriptions__subscription_id__resourcegroups__resource_group_name__routetables__route_table_name__get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Azure Subscription ID"}},{"name":"resource_group_name","in":"path","required":true,"schema":{"type":"string","title":"Resource Group Name"}},{"name":"route_table_name","in":"path","required":true,"schema":{"type":"string","title":"Route Table Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteTableModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resourcegroups/{resource_group_name}/virtualmachines/{vm_name}/routes":{"get":{"tags":["Route Table"],"summary":"Get VM Effective Routes","description":"Get all effective routes for a specific virtual machine.","operationId":"get_vm_effective_routes_api_subscriptions__subscription_id__resourcegroups__resource_group_name__virtualmachines__vm_name__routes_get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Azure Subscription ID"}},{"name":"resource_group_name","in":"path","required":true,"schema":{"type":"string","title":"Resource Group Name"}},{"name":"vm_name","in":"path","required":true,"schema":{"type":"string","title":"Virtual Machine Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RouteModel"},"title":"Response Get Vm Effective Routes Api Subscriptions  Subscription Id  Resourcegroups  Resource Group Name  Virtualmachines  Vm Name  Routes Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscriptions/{subscription_id}/resourcegroups/{resource_group_name}/networkinterfaces/{nic_name}/routes":{"get":{"tags":["Route Table"],"summary":"Get NIC Effective Routes","description":"Get all effective routes for a specific network interface.","operationId":"get_nic_effective_routes_api_subscriptions__subscription_id__resourcegroups__resource_group_name__networkinterfaces__nic_name__routes_get","parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"string","title":"Azure Subscription ID"}},{"name":"resource_group_name","in":"path","required":true,"schema":{"type":"string","title":"Resource Group Name"}},{"name":"nic_name","in":"path","required":true,"schema":{"type":"string","title":"Network Interface Name"}},{"name":"refresh-cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Refresh-Cache"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RouteModel"},"title":"Response Get Nic Effective Routes Api Subscriptions  Subscription Id  Resourcegroups  Resource Group Name  Networkinterfaces  Nic Name  Routes Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Get Project Info","description":"Simple endpoint to return the project name and version.","operationId":"get_project_info__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/ping":{"get":{"summary":"Ping","operationId":"ping_api_ping_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AADGroupModel":{"properties":{"id":{"type":"string","title":"Id"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"}},"type":"object","required":["id"],"title":"AADGroupModel"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NetworkInterfaceModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"private_ip_addresses":{"items":{"type":"string"},"type":"array","title":"Private Ip Addresses"},"public_ip_addresses":{"items":{"type":"string"},"type":"array","title":"Public Ip Addresses"}},"type":"object","required":["id","name","private_ip_addresses","public_ip_addresses"],"title":"NetworkInterfaceModel"},"NsgRuleModel":{"properties":{"name":{"type":"string","title":"Name"},"direction":{"type":"string","title":"Direction"},"protocol":{"type":"string","title":"Protocol"},"port_range":{"type":"string","title":"Port Range"},"access":{"type":"string","title":"Access"}},"type":"object","required":["name","direction","protocol","port_range","access"],"title":"NsgRuleModel"},"ResourceGroupModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"tags":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Tags"}},"type":"object","required":["id","name","location"],"title":"ResourceGroupModel"},"RouteEntryModel":{"properties":{"name":{"type":"string","title":"Name"},"address_prefix":{"type":"string","title":"Address Prefix"},"next_hop_type":{"type":"string","title":"Next Hop Type"},"next_hop_ip_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Hop Ip Address"}},"type":"object","required":["name","address_prefix","next_hop_type"],"title":"RouteEntryModel","description":"Model for a route entry within a route table"},"RouteModel":{"properties":{"address_prefix":{"type":"string","title":"Address Prefix"},"next_hop_type":{"type":"string","title":"Next Hop Type"},"next_hop_ip":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Hop Ip"},"route_origin":{"type":"string","title":"Route Origin"}},"type":"object","required":["address_prefix","next_hop_type","route_origin"],"title":"RouteModel"},"RouteTableModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"resource_group":{"type":"string","title":"Resource Group"},"routes":{"items":{"$ref":"#/components/schemas/RouteEntryModel"},"type":"array","title":"Routes"},"subnets":{"items":{"type":"string"},"type":"array","title":"Subnets","default":[]},"provisioning_state":{"type":"string","title":"Provisioning State"},"disable_bgp_route_propagation":{"type":"boolean","title":"Disable Bgp Route Propagation","default":false},"tags":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Tags"},"subscription_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Id"}},"type":"object","required":["id","name","location","resource_group","routes","provisioning_state"],"title":"RouteTableModel","description":"Detailed model for a route table"},"RouteTableSummaryModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"resource_group":{"type":"string","title":"Resource Group"},"route_count":{"type":"integer","title":"Route Count"},"subnet_count":{"type":"integer","title":"Subnet Count"},"provisioning_state":{"type":"string","title":"Provisioning State"},"subscription_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Id"}},"type":"object","required":["id","name","location","resource_group","route_count","subnet_count","provisioning_state"],"title":"RouteTableSummaryModel","description":"Summary model for a route table"},"SubscriptionModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"state":{"type":"string","title":"State"}},"type":"object","required":["id","name","state"],"title":"SubscriptionModel"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VirtualMachineDetail":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"vm_size":{"type":"string","title":"Vm Size"},"os_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Os Type"},"power_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Power State"},"network_interfaces":{"items":{"$ref":"#/components/schemas/NetworkInterfaceModel"},"type":"array","title":"Network Interfaces"},"effective_nsg_rules":{"items":{"$ref":"#/components/schemas/NsgRuleModel"},"type":"array","title":"Effective Nsg Rules"},"effective_routes":{"items":{"$ref":"#/components/schemas/RouteModel"},"type":"array","title":"Effective Routes"},"aad_groups":{"items":{"$ref":"#/components/schemas/AADGroupModel"},"type":"array","title":"Aad Groups"}},"type":"object","required":["id","name","location","vm_size","network_interfaces","effective_nsg_rules","effective_routes","aad_groups"],"title":"VirtualMachineDetail"},"VirtualMachineHostname":{"properties":{"vm_name":{"type":"string","title":"Vm Name"},"hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hostname"}},"type":"object","required":["vm_name"],"title":"VirtualMachineHostname","description":"Model for VM name and hostname"},"VirtualMachineModel":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"vm_size":{"type":"string","title":"Vm Size"},"os_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Os Type"},"power_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Power State"}},"type":"object","required":["id","name","location","vm_size"],"title":"VirtualMachineModel"},"VirtualMachineReport":{"properties":{"hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hostname"},"os":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Os"},"environment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Environment"},"purpose":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Purpose"},"ip_addresses":{"items":{"type":"string"},"type":"array","title":"Ip Addresses","default":[]},"public_ip_addresses":{"items":{"type":"string"},"type":"array","title":"Public Ip Addresses","default":[]},"vm_name":{"type":"string","title":"Vm Name"},"vm_size":{"type":"string","title":"Vm Size"},"os_disk_size_gb":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Os Disk Size Gb"},"resource_group":{"type":"string","title":"Resource Group"},"location":{"type":"string","title":"Location"},"subscription_id":{"type":"string","title":"Subscription Id"},"subscription_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Name"}},"type":"object","required":["vm_name","vm_size","resource_group","location","subscription_id"],"title":"VirtualMachineReport","description":"Model for VM report with detailed information"},"VirtualMachineWithContext":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"location":{"type":"string","title":"Location"},"vm_size":{"type":"string","title":"Vm Size"},"os_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Os Type"},"power_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Power State"},"subscription_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Id"},"subscription_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subscription Name"},"resource_group_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Group Name"},"detail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detail Url"}},"type":"object","required":["id","name","location","vm_size"],"title":"VirtualMachineWithContext","description":"Extended virtual machine model that includes subscription and resource group context"}}}}